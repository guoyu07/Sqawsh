## Copyright 2015-2016 Robin Steel
##
## Licensed under the Apache License, Version 2.0 (the "License");
## you may not use this file except in compliance with the License.
## You may obtain a copy of the License at
##
##    http://www.apache.org/licenses/LICENSE-2.0
##
## Unless required by applicable law or agreed to in writing, software
## distributed under the License is distributed on an "AS IS" BASIS,
## WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
## See the License for the specific language governing permissions and
## limitations under the License.

<!DOCTYPE html> 
<html>
<head>
<title>Court Cancellation Form</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style>
  .cancellation-form input, button {
    border-color: #FA787E;
    border: 2px solid #dadada;
    border-radius: 7px;
    display: block;
  }
  .cancellation-form input:focus {
    outline: none;
    border-color: #9ecaed;
    box-shadow: 0 0 10px #9ecaed;
  }
  .cancellation-form label {
    display: block;
  }
  .cancellation-form button, #returnToBookings2 {
    background-color: Transparent;
    color: Black;
    margin-top: 10px;
  }
  .cancellation-form button[type=submit], #cancelreservation {
    background-color: #9ecaed;
    color: White;
    display: block;
    margin-top: 5px;
    font-family: 'Comic Sans MS', cursive, sans-serif;
  }
  .cancellation-form {
      border-color: #dadada;
      border: 2px solid #dadada;
      border-width: 2px;
      border-radius: 7px;
      width: fit-content;
      padding: 5px;
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background-color: rgba(100, 100, 100, 0.1);
  }
  .cancellation-form input {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background-color: White;
  }
  input:invalid {
    border-color: tomato;
    border: 2px solid tomato;
    border-radius: 7px;
  }
</style>
</head>
<body>
<h2>You are cancelling the $util.urlDecode($input.params('players')) booking of court $input.params('court') for $util.urlDecode($input.params('slotLong')) on $util.urlDecode($input.params('dateLong'))</h2>
<form class="cancellation-form" action=https://${context.apiId}.execute-api.${region}.amazonaws.com/Squash/bookings method="POST" autocomplete="off">
<label>Password:<input type="password" name="password" required placeholder="enter password"></label>
## Include parameters here so we can make the cancellation correctly
<input type=hidden name=redirectUrl value="http://${squashWebsiteBucket}.s3-website-${region}.amazonaws.com?selectedDate=${util.urlDecode($input.params('date'))}.html">
<input type=hidden name=apiGatewayBaseUrl value="https://${context.apiId}.execute-api.${region}.amazonaws.com/${context.stage}">
<input type=hidden name=putOrDelete value="DELETE">
<input type=hidden name=players value="$util.urlDecode($input.params('players'))">
<input type=hidden name=court value="$util.urlDecode($input.params('court'))">
<input type=hidden name=slot value="$util.urlDecode($input.params('slot'))">
<input type=hidden name=date value="$util.urlDecode($input.params('date'))">
<button type="submit" id="cancelreservation">Cancel squash court reservation</button>
</form>
<form class="returnToBookingsForm" action="http://${squashWebsiteBucket}.s3-website-${region}.amazonaws.com" method="GET">
<input type=hidden name="selectedDate" value="${input.params('date')}.html">
<button type="submit" id="returnToBookings2">Return to bookings table without cancelling  the reservation</button>
</form>
</body>
</html>